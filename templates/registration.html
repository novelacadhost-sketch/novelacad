<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Student Registration - Novelsolar Academy</title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Learning, Innovation, Sustainability, Education" name="keywords">
    <meta content="Novelsolar Academy - Student Registration" name="description">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename='apple-touch-icon.png') }}">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16x16.png') }}">
    <link rel="manifest" href="{{ url_for('static', filename='site.webmanifest') }}">

    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Jost:wght@500;600;700&family=Open+Sans:wght@400;600&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css" rel="stylesheet">

    <!-- Libraries Stylesheet -->
    <link href="{{ url_for('static', filename='lib/owlcarousel/assets/owl.carousel.min.css') }}" rel="stylesheet">

    <!-- Customized Bootstrap Stylesheet -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
</head>

<body>
    <!-- Navbar Start -->
    <div class="container-fluid p-0">
        <nav class="navbar navbar-expand-lg bg-white navbar-light py-3 py-lg-0 px-lg-5">
            <a href="{{ url_for('home') }}" class="navbar-brand ml-lg-3">
                <h3 class="m-0 text-uppercase text-primary"><img style="height: 80%;width: 80%; padding-left: 30%;"
                        src="{{ url_for('static', filename='img/Movelsolar Academy (2).png') }}"
                        alt="Novelsolar Academy logo"></h3>
            </a>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse justify-content-between px-lg-3" id="navbarCollapse">
                <div class="navbar-nav mx-auto py-0">
                    <a href="{{ url_for('home') }}" class="nav-item nav-link">Home</a>
                    <a href="{{ url_for('about') }}" class="nav-item nav-link">About</a>
                    <a href="{{ url_for('courses') }}" class="nav-item nav-link">Courses</a>
                    <div class="nav-item dropdown">
                        <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown">More</a>
                        <div class="dropdown-menu m-0">
                            <a href="#" class="dropdown-item">Course Detail</a>
                            <a href="#" class="dropdown-item">Our Features</a>
                            <a href="{{ url_for('team') }}" class="dropdown-item">Instructors</a>
                            <a href="#" class="dropdown-item">Testimonial</a>
                        </div>
                    </div>

                </div>

            </div>
        </nav>
    </div>
    <!-- Navbar End -->

    <!-- Registration Container Start -->
    <div class="registration-container">
        <div class="registration-form-wrapper">
            <h1><i class="fa fa-user-check mr-2"></i>Student Registration</h1>
            <p class="subtitle">Join Novelsolar Academy and start your journey towards a cleaner future</p>

            <div class="form-feedback" id="formFeedback"></div>

            <form id="registrationForm" class="registration-form" method="post"
                action="{{ url_for('submit_registration') }}">
                <!-- Personal Information Section -->
                <div class="form-section-title">
                    <i class="fa fa-user mr-2"></i>Personal Information
                </div>

                <div class="form-group">
                    <label for="fullName">Full Name <span class="required">*</span></label>
                    <input type="text" id="fullName" name="fullName" class="form-control"
                        placeholder="Enter your full name" required>
                    <div class="error-text"></div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="email">Email Address <span class="required">*</span></label>
                        <input type="email" id="email" name="email" class="form-control"
                            placeholder="your.email@example.com" required>
                        <div class="error-text"></div>
                    </div>
                    <div class="form-group">
                        <label for="nationality">Nationality <span class="required">*</span></label>
                        <div style="position: relative;">
                            <input type="text" id="nationalitySearch" class="form-control"
                                placeholder="Select your country..." autocomplete="off"
                                style="cursor: pointer; background-color: #fff;">
                            <span
                                style="position: absolute; right: 15px; top: 50%; transform: translateY(-50%); pointer-events: none; color: #666;">
                                <i class="fa fa-chevron-down" style="font-size: 0.8rem;"></i>
                            </span>
                        </div>
                        <select id="nationality" name="nationality" class="form-control" required
                            style="display: none;">
                            <option value="">-- Select a Country --</option>
                        </select>
                        <div id="nationalityDropdown" class="country-dropdown" style="display: none;"></div>
                        <div class="error-text"></div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="phoneNumber">Phone Number <span class="required">*</span></label>
                        <input type="tel" id="phoneNumber" name="phoneNumber" class="form-control"
                            placeholder="+234 8123456789" required>
                        <div class="error-text"></div>
                    </div>
                    <div class="form-group">
                        <label for="sex">Sex <span class="required">*</span></label>
                        <select id="sex" name="sex" class="form-control" required>
                            <option value="">-- Select --</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                            <option value="Prefer not to say">Prefer not to say</option>
                        </select>
                        <div class="error-text"></div>
                    </div>
                </div>

                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address" class="form-control"
                        placeholder="Enter your residential address">
                </div>

                <!-- Educational Background Section -->
                <div class="form-section-title">
                    <i class="fa fa-graduation-cap mr-2"></i>Educational Background
                </div>

                <div class="form-group">
                    <label for="educationLevel">Previous Educational Level <span class="required">*</span></label>
                    <select id="educationLevel" name="educationLevel" class="form-control" required>
                        <option value="">Select</option>
                        <option value="Primary School">Primary School</option>
                        <option value="Secondary School">Secondary School</option>
                        <option value="High School">High School</option>
                        <option value="National Diploma (ND)">National Diploma (ND)</option>
                        <option value="Higher National Diploma (HND)">Higher National Diploma (HND)</option>
                        <option value="Bachelor's Degree">Bachelor's Degree</option>
                        <option value="Master's Degree">Master's Degree</option>
                        <option value="Other">Other</option>
                    </select>
                    <div class="error-text"></div>
                </div>

                <div class="form-group">
                    <label for="qualification">Qualification/Certificate <span class="required">*</span></label>
                    <input type="text" id="qualification" name="qualification" class="form-control"
                        placeholder="e.g., WASSCE, NECO, O'Level" required>
                    <div class="error-text"></div>
                </div>

                <!-- Course Information Section -->
                <div class="form-section-title">
                    <i class="fa fa-book mr-2"></i>Course Information
                </div>

                <div class="form-group">
                    <label for="course">Select Course <span class="required">*</span></label>
                    <select id="course" name="course" class="form-control" required>
                        <option value="">-- Select a Course --</option>
                        <option value="Solar Design and Installation">Solar Design and Installation</option>
                        <option value="Solarpreneurship and Business Management">Solarpreneurship and Business
                            Management</option>
                        <option value="Repair and Maintenance">Repair and Maintenance</option>
                        <option value="HSE (Health, Safety, and Environment) Management">HSE (Health, Safety, and
                            Environment) Management</option>
                        <option value="Artificial Intelligence and Robotics">Artificial Intelligence and Robotics
                        </option>
                        <option value="Web Design and Development">Web Design and Development</option>
                        <option value="Digital Marketing">Digital Marketing</option>
                    </select>
                    <div class="error-text"></div>
                </div>

                <div class="form-group">
                    <label for="courseGoals">Your Goals for the Course <span class="required">*</span></label>
                    <textarea id="courseGoals" name="courseGoals" class="form-control"
                        placeholder="Tell us what you hope to achieve from this course..." required></textarea>
                    <div class="error-text"></div>
                </div>

                <!-- Additional Information Section -->
                <div class="form-section-title">
                    <i class="fa fa-info-circle mr-2"></i>Additional Information
                </div>

                <div class="form-group">
                    <label for="experience">Prior Experience (if any)</label>
                    <textarea id="experience" name="experience" class="form-control"
                        placeholder="Tell us about any relevant experience you have..."
                        style="min-height: 100px;"></textarea>
                </div>

                <div class="form-group">
                    <label for="infoSource">How did you hear about us? <span class="required">*</span></label>
                    <select id="infoSource" name="infoSource" class="form-control" required>
                        <option value="">-- Select --</option>
                        <option value="Social Media">Social Media (Facebook, Twitter, Instagram etc.)</option>
                        <option value="Friend/Family">Friend or Family</option>
                        <option value="Advertisement">Advertisement</option>
                        <option value="Internet Search">Internet Search (Google, Bing etc.)</option>
                        <option value="Other">Other</option>
                    </select>
                    <div class="error-text"></div>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="terms" name="terms" required>
                        <span class="ml-2">I agree to the Terms and Conditions and Privacy Policy <span
                                class="required">*</span></span>
                    </label>
                </div>

                <!-- Buttons -->
                <div>
                    <button type="submit" class="btn-submit">Submit Registration</button>
                    <button type="reset" class="btn-reset">Clear Form</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Registration Container End -->

    <!-- Footer Start -->
    <div class="container-fluid position-relative overlay-top bg-dark text-white-50 py-5" style="margin-top: 90px;">
        <div class="container mt-5 pt-5">
            <div class="row">
                <div class="col-md-8 offset-md-4 mb-5">
                    <a href="{{ url_for('home') }}" class="navbar-brand">
                        <h4 class="mt-n2 text-uppercase text-white"><i class="fa fa-book-reader mr-3"></i>Novelsolar
                            Academy</h4>
                    </a>
                    <p class="m-0">Where innovation meets sustainability!</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-4 mb-5">
                    <h3 class="text-white mb-4">Get In Touch</h3>
                    <p><i class="fa fa-map-marker-alt mr-2"></i>76, Adekunle Fajuyi Road Ibadan.
                        Opposite Gate 3, Adamasingba Stadium, Ibadan Oyo State</p>
                    <p><i class="fa fa-phone-alt mr-2"></i>+234 8113695917</p>
                    <p><i class="fa fa-envelope mr-2"></i>novelsolaracademy@gmail.com</p>
                    <div class="d-flex justify-content-start mt-4">
                        <a class="text-white mr-4" href="#"><i class="fab fa-2x fa-twitter"></i></a>
                        <a class="text-white mr-4" href="#"><i class="fab fa-2x fa-facebook-f"></i></a>
                        <a class="text-white mr-4" href="#"><i class="fab fa-2x fa-linkedin-in"></i></a>
                        <a class="text-white" href="#"><i class="fab fa-2x fa-instagram"></i></a>
                    </div>
                </div>
                <div class="col-md-4 mb-5">
                    <h3 class="text-white mb-4">Our Courses</h3>
                    <div class="d-flex flex-column justify-content-start">
                        <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Web Design</a>
                        <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Solar Energy</a>
                        <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Digital
                            Marketing</a>
                        <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Robotics</a>
                        <a class="text-white-50" href="#"><i class="fa fa-angle-right mr-2"></i>HSE Management</a>
                    </div>
                </div>
                <div class="col-md-4 mb-5">
                    <h3 class="text-white mb-4">Quick Links</h3>
                    <div class="d-flex flex-column justify-content-start">
                        <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Privacy Policy</a>
                        <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Terms &
                            Condition</a>
                        <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Regular FAQs</a>
                        <a class="text-white-50 mb-2" href="#"><i class="fa fa-angle-right mr-2"></i>Help & Support</a>
                        <a class="text-white-50" href="#"><i class="fa fa-angle-right mr-2"></i>Contact</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="container-fluid bg-dark text-white-50 border-top py-4"
        style="border-color: rgba(256, 256, 256, .1) !important;">
        <div class="container">
            <div class="row">
                <div class="col-md-6 text-center text-md-left mb-3 mb-md-0">
                    <p class="m-0">Copyright &copy; <a class="text-white" href="#">Novelsolar Academy</a>. All Rights
                        Reserved.</p>
                </div>
                <div class="col-md-6 text-center text-md-right">
                    <p class="m-0">Designed by <a class="text-white" href="#">Novelsolar Academy</a></p>
                </div>
            </div>
        </div>
    </div>
    <!-- Footer End -->

    <!-- Back to Top -->
    <a href="#" class="btn btn-lg btn-primary rounded-0 btn-lg-square back-to-top"><i
            class="fa fa-angle-double-up"></i></a>

    <!-- JavaScript Libraries -->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='lib/easing/easing.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/waypoints/waypoints.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/counterup/counterup.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/owlcarousel/owl.carousel.min.js') }}"></script>

    <!-- Template Javascript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>

    <!-- Registration Form Handling -->
    <script>
        // List of countries with dial codes
        const countries = [
            { name: "Afghanistan", code: "+93" }, { name: "Albania", code: "+355" }, { name: "Algeria", code: "+213" },
            { name: "Andorra", code: "+376" }, { name: "Angola", code: "+244" }, { name: "Antigua and Barbuda", code: "+1-268" },
            { name: "Argentina", code: "+54" }, { name: "Armenia", code: "+374" }, { name: "Australia", code: "+61" },
            { name: "Austria", code: "+43" }, { name: "Azerbaijan", code: "+994" }, { name: "Bahamas", code: "+1-242" },
            { name: "Bahrain", code: "+973" }, { name: "Bangladesh", code: "+880" }, { name: "Barbados", code: "+1-246" },
            { name: "Belarus", code: "+375" }, { name: "Belgium", code: "+32" }, { name: "Belize", code: "+501" },
            { name: "Benin", code: "+229" }, { name: "Bhutan", code: "+975" }, { name: "Bolivia", code: "+591" },
            { name: "Bosnia and Herzegovina", code: "+387" }, { name: "Botswana", code: "+267" }, { name: "Brazil", code: "+55" },
            { name: "Brunei", code: "+673" }, { name: "Bulgaria", code: "+359" }, { name: "Burkina Faso", code: "+226" },
            { name: "Burundi", code: "+257" }, { name: "Cambodia", code: "+855" }, { name: "Cameroon", code: "+237" },
            { name: "Canada", code: "+1" }, { name: "Cape Verde", code: "+238" }, { name: "Central African Republic", code: "+236" },
            { name: "Chad", code: "+235" }, { name: "Chile", code: "+56" }, { name: "China", code: "+86" },
            { name: "Colombia", code: "+57" }, { name: "Comoros", code: "+269" }, { name: "Congo", code: "+242" },
            { name: "Costa Rica", code: "+506" }, { name: "Croatia", code: "+385" }, { name: "Cuba", code: "+53" },
            { name: "Cyprus", code: "+357" }, { name: "Czech Republic", code: "+420" }, { name: "Denmark", code: "+45" },
            { name: "Djibouti", code: "+253" }, { name: "Dominica", code: "+1-767" }, { name: "Dominican Republic", code: "+1-809" },
            { name: "East Timor", code: "+670" }, { name: "Ecuador", code: "+593" }, { name: "Egypt", code: "+20" },
            { name: "El Salvador", code: "+503" }, { name: "Equatorial Guinea", code: "+240" }, { name: "Eritrea", code: "+291" },
            { name: "Estonia", code: "+372" }, { name: "Eswatini", code: "+268" }, { name: "Ethiopia", code: "+251" },
            { name: "Fiji", code: "+679" }, { name: "Finland", code: "+358" }, { name: "France", code: "+33" },
            { name: "Gabon", code: "+241" }, { name: "Gambia", code: "+220" }, { name: "Georgia", code: "+995" },
            { name: "Germany", code: "+49" }, { name: "Ghana", code: "+233" }, { name: "Greece", code: "+30" },
            { name: "Grenada", code: "+1-473" }, { name: "Guatemala", code: "+502" }, { name: "Guinea", code: "+224" },
            { name: "Guinea-Bissau", code: "+245" }, { name: "Guyana", code: "+592" }, { name: "Haiti", code: "+509" },
            { name: "Honduras", code: "+504" }, { name: "Hong Kong", code: "+852" }, { name: "Hungary", code: "+36" },
            { name: "Iceland", code: "+354" }, { name: "India", code: "+91" }, { name: "Indonesia", code: "+62" },
            { name: "Iran", code: "+98" }, { name: "Iraq", code: "+964" }, { name: "Ireland", code: "+353" },
            { name: "Israel", code: "+972" }, { name: "Italy", code: "+39" }, { name: "Ivory Coast", code: "+225" },
            { name: "Jamaica", code: "+1-876" }, { name: "Japan", code: "+81" }, { name: "Jordan", code: "+962" },
            { name: "Kazakhstan", code: "+7" }, { name: "Kenya", code: "+254" }, { name: "Kiribati", code: "+686" },
            { name: "Kosovo", code: "+383" }, { name: "Kuwait", code: "+965" }, { name: "Kyrgyzstan", code: "+996" },
            { name: "Laos", code: "+856" }, { name: "Latvia", code: "+371" }, { name: "Lebanon", code: "+961" },
            { name: "Lesotho", code: "+266" }, { name: "Liberia", code: "+231" }, { name: "Libya", code: "+218" },
            { name: "Liechtenstein", code: "+423" }, { name: "Lithuania", code: "+370" }, { name: "Luxembourg", code: "+352" },
            { name: "Macao", code: "+853" }, { name: "Madagascar", code: "+261" }, { name: "Malawi", code: "+265" },
            { name: "Malaysia", code: "+60" }, { name: "Maldives", code: "+960" }, { name: "Mali", code: "+223" },
            { name: "Malta", code: "+356" }, { name: "Marshall Islands", code: "+692" }, { name: "Mauritania", code: "+222" },
            { name: "Mauritius", code: "+230" }, { name: "Mexico", code: "+52" }, { name: "Micronesia", code: "+691" },
            { name: "Moldova", code: "+373" }, { name: "Monaco", code: "+377" }, { name: "Mongolia", code: "+976" },
            { name: "Montenegro", code: "+382" }, { name: "Morocco", code: "+212" }, { name: "Mozambique", code: "+258" },
            { name: "Myanmar", code: "+95" }, { name: "Namibia", code: "+264" }, { name: "Nauru", code: "+674" },
            { name: "Nepal", code: "+977" }, { name: "Netherlands", code: "+31" }, { name: "New Zealand", code: "+64" },
            { name: "Nicaragua", code: "+505" }, { name: "Niger", code: "+227" }, { name: "Nigeria", code: "+234" },
            { name: "North Korea", code: "+850" }, { name: "North Macedonia", code: "+389" }, { name: "Norway", code: "+47" },
            { name: "Oman", code: "+968" }, { name: "Pakistan", code: "+92" }, { name: "Palau", code: "+680" },
            { name: "Palestine", code: "+970" }, { name: "Panama", code: "+507" }, { name: "Papua New Guinea", code: "+675" },
            { name: "Paraguay", code: "+595" }, { name: "Peru", code: "+51" }, { name: "Philippines", code: "+63" },
            { name: "Poland", code: "+48" }, { name: "Portugal", code: "+351" }, { name: "Qatar", code: "+974" },
            { name: "Romania", code: "+40" }, { name: "Russia", code: "+7" }, { name: "Rwanda", code: "+250" },
            { name: "Saint Kitts and Nevis", code: "+1-869" }, { name: "Saint Lucia", code: "+1-758" },
            { name: "Saint Vincent and the Grenadines", code: "+1-784" }, { name: "Samoa", code: "+685" },
            { name: "San Marino", code: "+378" }, { name: "Sao Tome and Principe", code: "+239" }, { name: "Saudi Arabia", code: "+966" },
            { name: "Senegal", code: "+221" }, { name: "Serbia", code: "+381" }, { name: "Seychelles", code: "+248" },
            { name: "Sierra Leone", code: "+232" }, { name: "Singapore", code: "+65" }, { name: "Slovakia", code: "+421" },
            { name: "Slovenia", code: "+386" }, { name: "Solomon Islands", code: "+677" }, { name: "Somalia", code: "+252" },
            { name: "South Africa", code: "+27" }, { name: "South Korea", code: "+82" }, { name: "South Sudan", code: "+211" },
            { name: "Spain", code: "+34" }, { name: "Sri Lanka", code: "+94" }, { name: "Sudan", code: "+249" },
            { name: "Suriname", code: "+597" }, { name: "Sweden", code: "+46" }, { name: "Switzerland", code: "+41" },
            { name: "Syria", code: "+963" }, { name: "Taiwan", code: "+886" }, { name: "Tajikistan", code: "+992" },
            { name: "Tanzania", code: "+255" }, { name: "Thailand", code: "+66" }, { name: "Timor-Leste", code: "+670" },
            { name: "Togo", code: "+228" }, { name: "Tonga", code: "+676" }, { name: "Trinidad and Tobago", code: "+1-868" },
            { name: "Tunisia", code: "+216" }, { name: "Turkey", code: "+90" }, { name: "Turkmenistan", code: "+993" },
            { name: "Tuvalu", code: "+688" }, { name: "Uganda", code: "+256" }, { name: "Ukraine", code: "+380" },
            { name: "United Arab Emirates", code: "+971" }, { name: "United Kingdom", code: "+44" },
            { name: "United States", code: "+1" }, { name: "Uruguay", code: "+598" }, { name: "Uzbekistan", code: "+998" },
            { name: "Vanuatu", code: "+678" }, { name: "Vatican City", code: "+379" }, { name: "Venezuela", code: "+58" },
            { name: "Vietnam", code: "+84" }, { name: "Yemen", code: "+967" }, { name: "Zambia", code: "+260" },
            { name: "Zimbabwe", code: "+263" }
        ];

        document.addEventListener('DOMContentLoaded', function () {
            const nationalitySearch = document.getElementById('nationalitySearch');
            const nationalitySelect = document.getElementById('nationality');
            const nationalityDropdown = document.getElementById('nationalityDropdown');
            const registrationForm = document.getElementById('registrationForm');
            const formInputs = registrationForm.querySelectorAll('input, select, textarea');
            const feedbackDiv = document.getElementById('formFeedback');

            // Initialize country dropdown options
            countries.forEach(country => {
                const option = document.createElement('option');
                option.value = country.name;
                option.textContent = country.name;
                nationalitySelect.appendChild(option);
            });

            // Function to filter and show countries
            function showDropdown(searchTerm = '') {
                nationalityDropdown.innerHTML = '';
                const term = searchTerm.toLowerCase().trim();

                const filteredCountries = term.length === 0
                    ? countries
                    : countries.filter(country => country.name.toLowerCase().includes(term));

                if (filteredCountries.length === 0) {
                    nationalityDropdown.style.display = 'none';
                    return;
                }

                filteredCountries.forEach(country => {
                    const item = document.createElement('div');
                    item.className = 'country-item';
                    item.textContent = country.name;
                    item.addEventListener('click', function (e) {
                        // Stop propagation to prevent immediate closing by document click listener
                        e.stopPropagation();
                        updateCountry(country);
                    });
                    nationalityDropdown.appendChild(item);
                });

                nationalityDropdown.style.display = 'block';
            }

            // Event Listeners
            nationalitySearch.addEventListener('input', function () {
                showDropdown(this.value);
            });

            nationalitySearch.addEventListener('focus', function () {
                showDropdown(this.value);
            });

            nationalitySearch.addEventListener('click', function (e) {
                e.stopPropagation(); // Prevent document click from closing immediately
                showDropdown(this.value);
            });

            // New helper to update country and phone code
            function updateCountry(countryObj) {
                nationalitySearch.value = countryObj.name;
                nationalitySelect.value = countryObj.name;
                nationalityDropdown.style.display = 'none';
                clearFieldError(nationalitySearch);

                // Auto-fill phone code
                const phoneInput = document.getElementById('phoneNumber');
                if (countryObj.code) {
                    phoneInput.value = countryObj.code + " ";
                    phoneInput.focus(); // Focus to let user type number
                }
            }

            // Close dropdown when clicking outside
            document.addEventListener('click', function (e) {
                if (e.target !== nationalitySearch && e.target !== nationalityDropdown) {
                    nationalityDropdown.style.display = 'none';
                }
            });

            // Real-time validation on blur
            formInputs.forEach(input => {
                input.addEventListener('blur', function () {
                    validateField(this);
                });

                input.addEventListener('focus', function () {
                    clearFieldError(this);
                });
            });

            // Form submission
            registrationForm.addEventListener('submit', function (e) {
                e.preventDefault();

                // Validate all fields
                let isValid = true;
                formInputs.forEach(input => {
                    if (input.type !== 'checkbox' && input.id !== 'nationality' && !validateField(input)) {
                        isValid = false;
                    }
                });

                // Validate nationality field
                if (!validateField(nationalitySelect)) {
                    isValid = false;
                }

                // Check terms checkbox
                if (!document.getElementById('terms').checked) {
                    showFeedback('error', 'Please agree to the Terms and Conditions.');
                    isValid = false;
                }

                if (isValid) {
                    // Collect form data
                    const formData = new FormData(registrationForm);
                    const data = Object.fromEntries(formData.entries());
                    // Handle checkbox manually
                    data.terms = document.getElementById('terms').checked;

                    // Send to backend
                    fetch("{{ url_for('submit_registration') }}", {
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify(data),
                    })
                        .then(response => response.json())
                        .then(result => {
                            if (result.redirect) {
                                window.location.href = result.redirect;
                            } else {
                                // Show success message (fallback)
                                showFeedback('success', 'Registration submitted successfully! We will contact you soon.');

                                // Reset form after 3 seconds
                                setTimeout(() => {
                                    registrationForm.reset();
                                    nationalitySearch.value = '';
                                    nationalityDropdown.innerHTML = '';
                                    nationalityDropdown.style.display = 'none';
                                    feedbackDiv.classList.remove('success', 'error');
                                    feedbackDiv.style.display = 'none';
                                }, 3000);
                            }
                        })
                        .catch(error => {
                            console.error('Error:', error);
                            showFeedback('error', 'An error occurred. Please try again.');
                        });
                }
            });

            function validateField(field) {
                const value = field.value.trim();
                const type = field.type;
                const name = field.id;
                let isValid = true;

                clearFieldError(field);

                // Validate required fields
                if (!value && field.hasAttribute('required')) {
                    showFieldError(field, 'This field is required');
                    isValid = false;
                } else if (value) {
                    // Email validation
                    if (type === 'email') {
                        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                        if (!emailRegex.test(value)) {
                            showFieldError(field, 'Please enter a valid email address');
                            isValid = false;
                        }
                    }
                    // Phone validation (basic)
                    else if (name === 'phoneNumber' && value.length < 10) {
                        showFieldError(field, 'Please enter a valid phone number');
                        isValid = false;
                    }
                    // Name validation
                    else if (name === 'fullName' && value.length < 3) {
                        showFieldError(field, 'Name must be at least 3 characters');
                        isValid = false;
                    }
                    // Course goals validation
                    else if (name === 'courseGoals' && value.length < 10) {
                        showFieldError(field, 'Please provide more details about your goals');
                        isValid = false;
                    }
                }

                return isValid;
            }

            function showFieldError(field, message) {
                field.classList.add('is-invalid');
                const errorMsg = field.parentElement.querySelector('.error-text');
                if (errorMsg) {
                    errorMsg.textContent = message;
                    errorMsg.style.display = 'block';
                }
            }

            function clearFieldError(field) {
                field.classList.remove('is-invalid');
                const errorMsg = field.parentElement.querySelector('.error-text');
                if (errorMsg) {
                    errorMsg.style.display = 'none';
                }
            }

            function showFeedback(type, message) {
                feedbackDiv.className = `form-feedback ${type}`;
                feedbackDiv.textContent = message;
            }
        });
    </script>
</body>

</html>